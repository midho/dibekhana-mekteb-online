<!DOCTYPE html>
<html lang="bs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Islam i musliman - Dibekhana Mekteb</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Custom CSS (Note the ../ to go up one level) -->
    <link rel="stylesheet" href="../css/style.css">
    <style>
        @media (min-width: 768px) {
            .poem-separator {
                border-right: 1px solid rgba(25, 135, 84, 0.3);
            }
        }
    </style>
</head>
<body>

    <div id="wrapper">
        <!-- Sidebar -->
        <nav id="sidebar">
            <div class="sidebar-header">
                <!-- Note the ../ to go back to root index -->
                <h3><a href="../index.html" class="text-white text-decoration-none"><i class="fas fa-mosque me-2"></i>Dibekhana Mekteb</a></h3>
            </div>

            <div id="sidebar-content">
                <!-- Menu will be populated by js/menu.js -->
            </div>
        </nav>

        <!-- Page Content -->
        <div id="content">
            <div class="container-fluid p-4">
                <div class="d-flex align-items-center mb-4 pb-2 border-bottom" style="border-color: #4CAF50 !important;">
                    <button type="button" id="sidebarCollapse" class="btn btn-success me-3">
                        <i class="fas fa-bars"></i>
                    </button>
                    <h2 id="content-title" class="m-0" style="color: #2E7D32;">Islam i musliman</h2>
                </div>
                
                <div id="main-content">
                    <div class="row">
                        <div class="col-lg-12">
                            <div class="card mb-4 shadow-sm">
                                <div class="card-header bg-success text-white">
                                    <i class="fas fa-book-open me-2"></i> Lekcija
                                </div>
                                <div class="card-body">
                                    <!-- Custom Audio Player Section -->
                                    <div class="mb-3 d-flex flex-column align-items-lg-end">
                                        <div style="width: 100%; max-width: 400px;">
                                            <button id="audioToggleBtn" class="btn btn-outline-success btn-sm w-100 mb-2" type="button" data-bs-toggle="collapse" data-bs-target="#audioPlayerCollapse" aria-expanded="false">
                                                <i class="fas fa-headphones-alt me-2"></i> Poslušaj lekciju
                                            </button>
                                            <div class="collapse" id="audioPlayerCollapse">
                                                <div class="card border-success shadow-sm" style="width: 100%; min-width: 300px;">
                                                    <div class="card-body p-2 bg-light">
                                                        <audio id="lessonAudio" preload="metadata" src="audio/akaid_lekcija_01.mp3"></audio>
                                                        
                                                        <div class="d-flex align-items-center">
                                                            <button id="playPauseBtn" class="btn btn-success rounded-circle p-0 d-flex align-items-center justify-content-center me-2" style="width: 35px; height: 35px;">
                                                                <i class="fas fa-play fa-sm"></i>
                                                            </button>
                                                            
                                                            <div class="flex-grow-1 mx-2">
                                                                <input type="range" class="form-range" id="audioProgress" value="0" min="0" step="0.1" style="accent-color: #2E7D32;">
                                                            </div>
                                                            
                                                            <span class="small text-success fw-bold" id="timeDisplay" style="min-width: 60px; text-align: center;">0:00/0:00</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <p class="fw-bold">Kako se zove naša vjera?</p>
                                    <p>Naša se vjera zove islam.</p>
                                    
                                    <p class="fw-bold">Šta znači islam?</p>
                                    <p>Islam znači pokornost Allahu, dž.š.</p>
                                    
                                    <p class="fw-bold">U čemu se sastoji pokornost Allahu?</p>
                                    <p>Pokornost Allahu se sastoji u:</p>
                                    <ul>
                                        <li>vjerovanju u Njega, dž.š.,</li>
                                        <li>izvršavanju svih islamskih propisa, i</li>
                                        <li>lijepom islamskom ponašanju.</li>
                                    </ul>
                                    
                                    <p class="fw-bold">Šta je to islam?</p>
                                    <p>Islam je vjera koju je Allah, dž.š., objavio preko svojih poslanika cijelom čovječanstvu.</p>
                                    
                                    <p class="fw-bold">Koliko je vjera objavio Allah?</p>
                                    <p>Allaj je objavio samo jednu vjeru, kao što je i On jedan i kod Njega je priznata samo jedna vjera. Sve druge vjere su nastale tako što su ljudi iskrivili vjeru koju je On objavio</p>
                                </div>
                            </div>

                            <div class="card mb-4 shadow-sm">
                                <div class="card-header bg-success text-white d-flex justify-content-between align-items-center" 
                                     style="cursor: pointer;" 
                                     data-bs-toggle="collapse" 
                                     data-bs-target="#poemCollapse" 
                                     aria-expanded="false" 
                                     aria-controls="poemCollapse">
                                    <span><i class="fas fa-feather-alt me-2"></i> Hiljadu ljeta <small class="ms-2 text-white-50">(Klikni za prikaz)</small></span>
                                    <i class="fas fa-chevron-down"></i>
                                </div>
                                <div id="poemCollapse" class="collapse">
                                    <div class="card-body text-center fst-italic">
                                        <div class="row gx-2 align-items-center">
                                            <div class="col-md-6 poem-separator">
                                                <p>Hiljadu ljeta proći će sestro<br>
                                                i mnogo vode proteće, znam,<br>
                                                al nikad neće izgubiti sjaj<br>
                                                moj i tvoj din - naš islam.</p>

                                                <p>Poštenje, skromnost i dobrota<br>
                                                odlike jesu našega dina<br>
                                                da budeš vjerna zemlji i rodu<br>
                                                i voliš srcem vjeru i slobodu.</p>

                                                <p>Islam nam srca u jedno spaja<br>
                                                i u njih bratstvo i ljubav toči,<br>
                                                putevi oni svijetle u tmini<br>
                                                kud muslimanska noga kroči.</p>

                                                <p>I zato, sestro, ponosna budi<br>
                                                što nosiš ime muslimanke,<br>
                                                sve svoje misli usmjeri Bogu<br>
                                                i kreni putem svoje majke.</p>
                                            </div>
                                            <div class="col-md-6">
                                                <p>Islam mi je vjera,<br>
                                                Islam mi je spas,<br>
                                                Islam mene uči<br>
                                                Da volim sve vas.<br>
                                                Islam žrtvu traži;<br>
                                                Nauku i rad,<br>
                                                Islam neće laži,<br>
                                                Vjeruj dok si mlad.</p>

                                                <p>Meni islam pruža<br>
                                                Smirenost i sreću<br>
                                                Zato nikad pogazit'<br>
                                                Riječ Božiju neću.</p>

                                                <p>Boriću se za islam<br>
                                                R'ječju i djelom,<br>
                                                Ko u Boga vjeruje<br>
                                                On korača smjelo.</p>
                                            </div>
                                        </div>
                                        <div class="mt-3 text-end text-muted small">
                                            <small>Vjeronauka, za 3. razred osnovne škole, str. 114.</small>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Define project root for menu.js -->
    <script>
        window.projectRoot = "../";
    </script>
    <!-- Menu Data and Logic (Note the ../) -->
    <script src="../js/menu.js"></script>
    
    <script>
        $(document).ready(function () {
            // Sidebar toggle logic moved to menu.js

            const audio = document.getElementById('lessonAudio');
            const playBtn = document.getElementById('playPauseBtn');
            const playIcon = playBtn.querySelector('i');
            const progress = document.getElementById('audioProgress');
            const timeDisplay = document.getElementById('timeDisplay');

            function formatTime(seconds) {
                if (isNaN(seconds)) return "0:00";
                const minutes = Math.floor(seconds / 60);
                const secs = Math.floor(seconds % 60);
                return `${minutes}:${secs < 10 ? '0' : ''}${secs}`;
            }

            playBtn.addEventListener('click', () => {
                if (audio.paused) {
                    audio.play();
                    playIcon.classList.remove('fa-play');
                    playIcon.classList.add('fa-pause');
                } else {
                    audio.pause();
                    playIcon.classList.remove('fa-pause');
                    playIcon.classList.add('fa-play');
                }
            });

            audio.addEventListener('loadedmetadata', () => {
                timeDisplay.textContent = "0:00/" + formatTime(audio.duration);
            });

            // Check if metadata is already loaded
            if (audio.readyState >= 1) {
                timeDisplay.textContent = "0:00/" + formatTime(audio.duration);
            }

            audio.addEventListener('timeupdate', () => {
                const current = audio.currentTime;
                const duration = audio.duration;
                
                progress.value = (current / duration) * 100 || 0;
                timeDisplay.textContent = `${formatTime(current)}/${formatTime(duration)}`;
            });

            progress.addEventListener('input', () => {
                const time = (progress.value / 100) * audio.duration;
                audio.currentTime = time;
            });

            audio.addEventListener('ended', () => {
                playIcon.classList.remove('fa-pause');
                playIcon.classList.add('fa-play');
                progress.value = 0;
                timeDisplay.textContent = "0:00/" + formatTime(audio.duration);
            });

            // Collapse Events
            const playerCollapse = document.getElementById('audioPlayerCollapse');
            const toggleBtn = document.getElementById('audioToggleBtn');

            playerCollapse.addEventListener('show.bs.collapse', () => {
                toggleBtn.classList.remove('btn-outline-success');
                toggleBtn.classList.add('btn-success');
                toggleBtn.innerHTML = '<i class="fas fa-headphones-alt me-2"></i> Zatvori player';
                
                // Auto-start audio
                audio.play();
                playIcon.classList.remove('fa-play');
                playIcon.classList.add('fa-pause');
                toggleBtn.blur();
            });

            playerCollapse.addEventListener('hide.bs.collapse', () => {
                toggleBtn.classList.remove('btn-success');
                toggleBtn.classList.add('btn-outline-success');
                toggleBtn.innerHTML = '<i class="fas fa-headphones-alt me-2"></i> Poslušaj lekciju';
                
                // Stop audio
                audio.pause();
                playIcon.classList.remove('fa-pause');
                playIcon.classList.add('fa-play');
                toggleBtn.blur();
            });
        });
    </script>
</body>
</html>
